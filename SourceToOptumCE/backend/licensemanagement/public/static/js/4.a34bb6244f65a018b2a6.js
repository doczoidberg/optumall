webpackJsonp([4],{"F/yn":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAcCAIAAACPoCp1AAAACXBIWXMAABcRAAAXEQHKJvM/AAAAm0lEQVRIie2UsQ0DIRAEz4joqiAmv5icJojphSZogpyYnJgmIOX1wiV4bVn6LWBWutXNa+/deydMrLW6lJJzBhV479WcE0QnojGGwtFPtIjgNggh3COD6CfwEz0Fvy/Q5x3WWgj6rYrWWkoJQX+rYowBon9JFUpEmBmBZuZHFU/BRwJUBTMbY7CqiDFiVVFr/WdVEJFzDqsKIroAKXVBjZf+PLEAAAAASUVORK5CYII="},QmTn:function(t,e,s){"use strict";var r=s("Xxa5"),a=s.n(r),o=s("exGp"),i=s.n(o),n=s("Dd8w"),u=s.n(n),l=s("2gGM"),c=s.n(l),d=s("Iq8t"),m=s("NYxO"),p={name:"ViewGroup",props:["group"],data:function(){return{msg:"Welcome to Your Vue.js App",form:new c.a({account_id:"",group_id:"",id:""}),keyword:"",userId:0}},created:function(){this.getAllUsers()},methods:u()({},Object(m.b)("users",{getAllUsers:"getAll"}),{onChange:function(t){this.userId=t.target.value},search:function(t){this.userId=0,this.keyword=t.target.value;var e=this.users.filter(this.filterByNameOrEmail);e.length>0&&(this.userId=e[0].id)},remeUserGroup:function(t,e,s,r){var o=this;return i()(a.a.mark(function i(){var n;return a.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return o.form.id=s,o.form.account_id=t,o.form.group_id=e,n=o,a.next=6,o.form.post("/api/group/removeuser",Object(d.b)()).then(function(t){var e=t.data;n.$swal({icon:"success",title:e.message,text:""}),o.group.members.splice(r,1),o.$emit("reloadList","reload")}).catch(function(t){Object(d.d)(t.response.status),n.$swal({icon:"error",title:t.response.data.message,text:""})});case 6:case"end":return a.stop()}},i,o)}))()},updateGroup:function(){var t=this;return i()(a.a.mark(function e(){var s,r,o;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=t.userId){e.next=2;break}return e.abrupt("return");case 2:if(s=t.userId,null!=(r=t.users.filter(function(t){return t.id==s}))&&0!=r.length){e.next=6;break}return e.abrupt("return");case 6:return t.form.account_id=r[0].account_id,t.form.group_id=t.group.id,o=t,e.next=11,t.form.post("/api/group/adduser",Object(d.b)()).then(function(e){var s=e.data;o.$swal({icon:"success",title:s.message,text:""});var a={account_id:s.group.account_id,group_id:s.group.group_id,id:s.group.id,account:{user:r[0]}};t.userId=0,t.group.members.push(a),t.$emit("reloadList","reload")}).catch(function(t){Object(d.d)(t.response.status),o.$swal({icon:"error",title:t.response.data.message,text:""})});case 11:case"end":return e.stop()}},e,t)}))()},filterByNameOrEmail:function(t){if(!t.name||!t.email)return!0;var e=t.name.toLowerCase(),s=t.email.toLowerCase();if(""!=this.keyword){var r=this.keyword.toLowerCase();return e.includes(r)||s.includes(r)}return!0}}),computed:u()({},Object(m.c)({users:function(t){return t.users.all.items}}),{filteredUsers:function(){return this.users?this.users.filter(this.filterByNameOrEmail):[]}})},v={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"modal fade",attrs:{id:"ViewGroup",role:"dialog"}},[t.group?s("div",{staticClass:"modal-dialog modal-group-view modal-w-400"},[s("div",{staticClass:"modal-content"},[s("div",{staticClass:"modal-header"},[s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal"}},[t._v("×")]),t._v(" "),s("h4",{staticClass:"modal-title"},[t._v("Manage group: "+t._s(t.group.name))])]),t._v(" "),s("div",{staticClass:"modal-body"},[t.group.members&&t.group.members.length>0?s("ul",{staticClass:"list-group"},t._l(t.group.members,function(e,r){return s("li",{key:e.id,staticClass:"list-group-item"},[s("span",[t._v(" "+t._s(e.account.user.name)+" - "+t._s(e.account.user.email)+" ")]),t._v(" "),s("button",{staticClass:"btn-i",on:{click:function(s){return t.remeUserGroup(e.account_id,e.group_id,e.id,r)}}},[s("i",{staticClass:"far fa-trash-alt"})])])}),0):t._e(),t._v(" "),s("div",{staticClass:"add_user"},[s("h5",{staticClass:"title-add-user"},[t._v("Add users to group")]),t._v(" "),s("p",{staticClass:"memo"},[t._v("Add users by choosing from the drop-down list")]),t._v(" "),s("input",{staticClass:"inp-email",attrs:{type:"text",placeholder:"Start typing name or email to filter users..."},on:{keyup:function(e){return t.search(e)}}}),t._v(" "),t.users?s("select",{directives:[{name:"model",rawName:"v-model",value:t.userId,expression:"userId"}],staticClass:"dropdown",attrs:{name:"userId",id:"userId"},on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.userId=e.target.multiple?s:s[0]},function(e){return t.onChange(e)}]}},t._l(t.filteredUsers,function(e){return s("option",{key:e.id,domProps:{value:e.id}},[t._v("\r\n                            "+t._s(e.name)+" - "+t._s(e.email)+"\r\n                        ")])}),0):t._e()]),t._v(" "),t.group.members&&0!=t.group.members.length?t._e():s("p",[s("span",[t._v("Data empty")])])]),t._v(" "),s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"btn btn-info btn-add-popup",attrs:{type:"button",disabled:t.form.busy},on:{click:function(e){return t.updateGroup()}}},[t._v("Update")]),t._v(" "),s("button",{staticClass:"btn btn-default",attrs:{type:"button","data-dismiss":"modal"}},[t._v("Cancel")])])])]):t._e()])},staticRenderFns:[]},f=s("VU/8")(p,v,!1,null,null,null);e.a=f.exports},Sknu:function(t,e,s){"use strict";var r=s("Xxa5"),a=s.n(r),o=s("exGp"),i=s.n(o),n=s("2gGM"),u=s.n(n),l=s("Iq8t"),c=(s("7+uW"),{name:"AddGroupPopup",data:function(){return{msg:"Welcome to Your Vue.js App",form:new u.a({name:"",type:0,description:"",emails:""})}},methods:{send:function(){var t=this;return i()(a.a.mark(function e(){var s;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=t,e.next=3,t.form.post("/api/group",Object(l.b)()).then(function(e){e.data;$("#addNewUser").modal("hide"),$("#addNewUserSuccess").modal("show"),t.form.reset(),t.$emit("reloadList","reload")}).catch(function(t){Object(l.d)(t.response.status),s.$swal({icon:"error",title:t.response.data.message,text:""})});case 3:case"end":return e.stop()}},e,t)}))()}}}),d={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"modal fade",attrs:{id:"addNewUser",role:"dialog"}},[s("div",{staticClass:"modal-dialog"},[s("div",{staticClass:"modal-content"},[s("form",{attrs:{role:"form"},on:{submit:function(e){return e.preventDefault(),t.send(e)},keydown:function(e){return t.form.onKeydown(e)}}},[t._m(0),t._v(" "),s("div",{staticClass:"modal-body popup-user"},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"usr"}},[t._v("Name:")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.name,expression:"form.name"}],staticClass:"form-control",attrs:{type:"text",name:"name",id:"usr"},domProps:{value:t.form.name},on:{input:function(e){e.target.composing||t.$set(t.form,"name",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"usr"}},[t._v("Description:")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.description,expression:"form.description"}],staticClass:"form-control",attrs:{type:"text",name:"description",id:"description"},domProps:{value:t.form.description},on:{input:function(e){e.target.composing||t.$set(t.form,"description",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"usr"}},[t._v("Bulk add users:")]),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.emails,expression:"form.emails"}],staticClass:"form-control",attrs:{name:"emails",id:"emails"},domProps:{value:t.form.emails},on:{input:function(e){e.target.composing||t.$set(t.form,"emails",e.target.value)}}}),t._v(" "),s("i",[t._v("Example: test01@gmail;tester02@gmail;")])]),t._v(" "),s("div",{staticClass:"modal-footer"},[s("alert-success",{attrs:{form:t.form,message:"Created success!"}}),t._v(" "),s("button",{staticClass:"btn btn-info btn-add-popup",attrs:{type:"submit",disabled:t.form.busy}},[t._v("Add")]),t._v(" "),s("button",{staticClass:"btn btn-default",attrs:{type:"button","data-dismiss":"modal"}},[t._v("Close")])],1)])])])])]),t._v(" "),t._m(1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal-header"},[e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal"}},[this._v("×")]),this._v(" "),e("h4",{staticClass:"modal-title"},[this._v("Add Group")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal fade",attrs:{id:"addNewUserSuccess",role:"dialog"}},[e("div",{staticClass:"modal-dialog modal-sm popup-add-success"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-body popup-user text-center"},[e("h4",{staticClass:"modal-title"},[this._v("Group(s) added succesfully")]),this._v(" "),e("button",{staticClass:"btn btn-info btn-add-popup",attrs:{type:"button","data-dismiss":"modal"}},[this._v("OK")])])])])])}]},m=s("VU/8")(c,d,!1,null,null,null);e.a=m.exports},gVTt:function(t,e){},mys4:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAIAAAD9b0jDAAAACXBIWXMAABcRAAAXEQHKJvM/AAAAzklEQVRIie2VMQqEMBBFdclUFkmTa3iEXMIb5wYGxNat00yK2EzhggGJE7CKhay/+vGFgTB8fztN0zzPzVnDMKSz995ay6gxRmudvLXWe59TrfWnuUHv0Ppq4y4291guESEio0opAEgeEYkopwDQbtv2jOffMlR8d7GvxphkENE5x2jf90qp5MdxDCHkVEopYowsZ7mIqKT5ZkII5YU3UfUluq478lMKAEp6xCntmlEp5b8nal3X6n8psSzLRfEh4nXxOefe4nvs0PrFBwA/w2OE6Vx71zkAAAAASUVORK5CYII="},oZZt:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=s("Dd8w"),a=s.n(r),o=s("Sknu"),i=s("QmTn"),n=s("NYxO"),u={name:"Group",components:{AddGroup:o.a,ViewGroup:i.a},created:function(){this.getAllGroups()},data:function(){return{msg:"Welcome to Your Vue.js App",userFilterKey:"all",currentSort:"name",currentSortDir:"asc",keyword:"",group:{},teams:[{id:1,name:"Team 01",member:5,products:"CS, G2"},{id:2,name:"Team 02",member:10,products:"CS, G3"},{id:3,name:"Team 03",member:15,products:"CS, G3, G2"}]}},methods:a()({},Object(n.b)("groups",{getAllGroups:"getAll",deleteGroup:"delete"}),{reloadListView:function(){this.getAllGroups()},viewGroup:function(t){this.group=t,$("#ViewGroup").modal("show")},applyFilter:function(){""!=this.keyword&&(this.userFilterKey="apply")},sort:function(t){this.userFilterKey="apply",t===this.currentSort&&(this.currentSortDir="asc"===this.currentSortDir?"desc":"asc"),this.currentSort=t},clearInput:function(){this.keyword="",this.userFilterKey="all",this.sort="asc"},filterByNameOrEmail:function(t){var e=t.name.toLowerCase();if(""!=this.keyword){var s=this.keyword.toLowerCase();return e.includes(s)}return!0},orderBy:function(t,e){var s=1;return"desc"===this.currentSortDir&&(s=-1),t[this.currentSort]<e[this.currentSort]?-1*s:t[this.currentSort]>e[this.currentSort]?1*s:0}}),computed:a()({},Object(n.c)({groups:function(t){return t.groups.all}}),{filteredRows:function(){return this[this.userFilterKey]},all:function(){return this.groups.items},apply:function(){return this.groups.items.filter(this.filterByNameOrEmail).sort(this.orderBy)}})},l={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"users-page group-page",attrs:{id:"page-wrapper"}},[r("div",{staticClass:"container-fluid"},[t._m(0),t._v(" "),r("div",{staticClass:"row"},[r("div",{staticClass:"col-lg-10 sort-left"},[r("span",[t._v("Sort by: ")]),t._v("  \r\n                "),r("router-link",{staticClass:"btn",attrs:{to:"/admin/users/grid"}},[t._v("User")]),t._v(" "),r("router-link",{staticClass:"btn active",attrs:{to:"/admin/users"}},[t._v("Group")]),t._v(" "),r("div",{staticClass:"content-search"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.keyword,expression:"keyword"}],staticClass:"form-control search-input",attrs:{type:"text",name:"keyword",placeholder:"Search groups..."},domProps:{value:t.keyword},on:{keyup:function(e){return t.applyFilter("")},input:function(e){e.target.composing||(t.keyword=e.target.value)}}}),t._v(" "),r("button",{staticClass:"btn btn-search",on:{click:function(e){return t.applyFilter("")}}},[r("i",{staticClass:"fa fa-search"})])])],1),t._v(" "),r("div",{staticClass:"col-lg-2 button-right"},[t._m(1),t._v(" "),r("add-group",{on:{reloadList:t.reloadListView}})],1)]),t._v(" "),r("div",{staticClass:"row"},[r("div",{staticClass:"col-lg-5 change-view"},[r("router-link",{staticClass:"btn btn-changeview",attrs:{to:"/admin/group/grid"}},[r("img",{attrs:{src:s("mys4"),alt:"userManIcons"}})]),t._v(" "),r("router-link",{staticClass:"btn btn-changeview active",attrs:{to:"/admin/group"}},[r("img",{attrs:{src:s("F/yn"),alt:"userManIcons"}})]),t._v(" "),r("span",{staticClass:"user-count"},[t._v("All group\r\n                "),t.groups.items?r("span",[t._v(" ("+t._s(t.groups.items.length)+")")]):t._e()])],1)]),t._v(" "),r("div",{staticClass:"row"},[r("div",{staticClass:"col-lg-12"},[r("div",{staticClass:"panel panel-default"},[r("div",{staticClass:"panel-body"},[r("div",{staticClass:"table-responsive"},[r("table",{staticClass:"table table-users"},[t._m(2),t._v(" "),r("thead",[r("tr",[r("th",[t._v("Group "),r("i",{class:["asc"==t.currentSortDir?"fa fa-sort-amount-asc":"fa fa-sort-amount-desc"],on:{click:function(e){return t.sort("name")}}})]),t._v(" "),r("th",[t._v("Available products")]),t._v(" "),r("th",{staticClass:"text-center"},[t._v("Team members")]),t._v(" "),r("th")])]),t._v(" "),r("tbody",[t._l(t.filteredRows,function(e){return r("tr",[r("td",[t._v(t._s(e.name))]),t._v(" "),r("td",t._l(e.licenses,function(e){return r("span",[t._v(t._s(e.product.code)+",")])}),0),t._v(" "),r("td",{staticClass:"text-center"},[t._v(t._s(e.totalMember))]),t._v(" "),r("td",{staticClass:"text-right"},[r("a",{staticClass:"btn-view   cursor-pointer",on:{click:function(s){return t.viewGroup(e)}}},[t._v("Manage")]),t._v(" "),r("a",{staticClass:"btn-delete  cursor-pointer",on:{click:function(s){return t.deleteGroup(e.id)}}},[r("i",{staticClass:"far fa-trash-alt"})])])])}),t._v(" "),t.groups.items&&0===t.groups.items.length?r("tr",[r("td",{staticClass:"text-center",attrs:{colspan:"4"}},[t._v(" No Match Found")])]):t._e()],2)])])])])])])]),t._v(" "),r("view-group",{attrs:{group:t.group},on:{reloadList:t.reloadListView}})],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"row"},[e("div",{staticClass:"col-lg-12"},[e("h1",{staticClass:"page-header"},[this._v("User management")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticClass:"btn btn-addnew",attrs:{"data-toggle":"modal","data-target":"#addNewUser"}},[e("i",{staticClass:"fa fa-plus"}),this._v(" Create new group"),e("span",{staticClass:"badge badge-primary"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("colgroup",[e("col",{attrs:{width:"25%"}}),this._v(" "),e("col",{attrs:{width:"25%"}}),this._v(" "),e("col",{attrs:{width:"25%"}}),this._v(" "),e("col",{attrs:{width:"25%"}})])}]};var c=s("VU/8")(u,l,!1,function(t){s("gVTt")},"data-v-71750dfe",null);e.default=c.exports}});
//# sourceMappingURL=4.a34bb6244f65a018b2a6.js.map