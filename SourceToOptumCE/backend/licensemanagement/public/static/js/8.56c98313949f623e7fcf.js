webpackJsonp([8],{"7zoe":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("Xxa5"),n=s.n(a),r=s("exGp"),o=s.n(r),i=s("Dd8w"),c=s.n(i),l=s("2gGM"),u=s.n(l),d=s("Iq8t"),p={props:["user"],name:"ConfirmCodeAdmin",data:function(){return{msg:"Welcome to Your Vue.js App",form:new u.a({code:"",userId:""})}},methods:{resendCode:function(){var t=this;return o()(n.a.mark(function e(){var s;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=t,e.next=3,t.form.post("https://account.optumce.com/api/settings/delete/confirm",Object(d.b)()).then(function(t){var e=t.data;s.$swal({icon:"success",title:e.message,text:""})}).catch(function(t){s.$swal({icon:"error",title:t.response.data.message,text:""})});case 3:case"end":return e.stop()}},e,t)}))()},deleteAccount:function(){var t=this;return o()(n.a.mark(function e(){var s;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.form.userId=t.user.id,s=t,e.next=5,t.form.post("https://account.optumce.com/api/settings/delete/account",Object(d.b)()).then(function(t){t.data;$("#myModalConfirmCode").modal("hide"),s.$router.push("/admin/users/grid")}).catch(function(t){Object(d.d)(t.response.status),s.$swal({icon:"error",title:t.response.data.message,text:""})});case 5:case"end":return e.stop()}},e,t)}))()}}},v={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"modal fade",attrs:{id:"myModalConfirmCode",role:"dialog"}},[s("div",{staticClass:"modal-dialog modal-sm popup-user-delete"},[s("div",{staticClass:"modal-content"},[s("div",{staticClass:"modal-body  text-center"},[s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal"}},[t._v("×")]),t._v(" "),s("i",{staticClass:"fa fa-mobile"}),t._v(" "),s("h4",{staticClass:"modal-title"},[t._v("Please enter the security code sent to your email ")]),t._v(" "),s("form",{staticClass:"otp",attrs:{role:"form"},on:{submit:function(e){return e.preventDefault(),t.deleteAccount(e)},keydown:function(e){return t.form.onKeydown(e)}}},[s("label",{attrs:{for:"otpcode"}},[t._v("6-digit code")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.code,expression:"form.code"}],staticClass:"form-control otpcode",attrs:{type:"text",name:"code"},domProps:{value:t.form.code},on:{input:function(e){e.target.composing||t.$set(t.form,"code",e.target.value)}}}),t._v(" "),s("a",{attrs:{href:"#"},on:{click:t.resendCode}},[t._v("Resend")]),t._v(" "),s("div",{staticClass:"modal-button"},[s("button",{staticClass:"btn btn-primary",attrs:{type:"submit",disabled:t.form.busy}},[t._v("Confirm")]),t._v(" "),s("button",{staticClass:"btn btn-default",attrs:{type:"button","data-dismiss":"modal"}},[t._v("Cancel")])])])])])])])},staticRenderFns:[]};var m=s("VU/8")(p,v,!1,function(t){s("T2JI")},"data-v-28c64b12",null).exports,f=s("NYxO"),_={name:"UserDetail",components:{"component-popup-confirm":m,BtnSwitch:s("Hp41").a},methods:c()({removeAccountOutSeat:function(t){var e=this;return o()(n.a.mark(function s(){var a;return n.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return e.form.seat_id=t,a=e,s.next=4,e.form.post("https://account.optumce.com/api/licenses/removeAccountOutSeat",Object(d.b)()).then(function(t){var s=t.data;e.form.reset(),a.$swal({icon:"success",title:s.message,text:""})}).catch(function(t){Object(d.d)(t.response.status),a.$swal({icon:"error",title:t.response.data.message,text:""})});case 4:case"end":return s.stop()}},s,e)}))()},confirmCode:function(){var t=this;return o()(n.a.mark(function e(){var s;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=t,e.next=3,t.formDelete.post("https://account.optumce.com/api/settings/delete/confirm",Object(d.b)()).then(function(t){t.data;$("#myModalDelete").modal("hide"),$("#myModalConfirmCode").modal("show")}).catch(function(t){Object(d.d)(t.response.status),s.$swal({icon:"error",title:"Oops...",text:t.response.data.message})});case 3:case"end":return e.stop()}},e,t)}))()},handleChangeBtn:function(t){var e=t.checked?"Assign":"UnAssign";this.handleChange(e,t.parentExt,t.parentData)},handleChange:function(t,e,s){var a=this;return o()(n.a.mark(function r(){var o;return n.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a.form.account_id=s,a.form.type=t,a.form.licenseId=e,o=a,n.next=6,a.form.post("https://account.optumce.com/api/licenses/assign",Object(d.b)()).then(function(t){var e=t.data;a.form.reset(),o.$swal({icon:"success",title:e.message,text:""})}).catch(function(t){Object(d.d)(t.response.status),t.response.data.stauts||o.getUser(),o.$swal({icon:"error",title:t.response.data.message,text:""})});case 6:case"end":return n.stop()}},r,a)}))()},getUser:function(t){var e=this;this.$http.get("https://account.optumce.com/api/users/"+t,Object(d.b)()).then(function(t){e.user=t.data.user}).catch(function(t){Object(d.d)(t.response.status)})},getLicense:function(t){var e=this;this.$http.get("https://account.optumce.com/api/mylicenses/"+t,Object(d.b)()).then(function(t){e.licenses=t.data}).catch(function(t){Object(d.d)(t.response.status)})}},Object(f.b)("groups",{getAllGroups:"getAll",deleteGroup:"delete"}),{onChangeGroup:function(t){if(""!=t.target.value){var e=this,s=this.$route.params.id;this.$http.post("https://account.optumce.com/api/settings/changeGroup/"+s,{account_id:t.target.value,user_id:s},Object(d.b)()).then(function(t){e.$swal({icon:"success",title:"Updated group success",text:""})}).catch(function(t){Object(d.d)(t.response.status),e.$swal({icon:"error",title:t.response.data.message,text:""})})}},onChangeRole:function(t){var e=this.$route.params.id,s=this;this.$http.post("https://account.optumce.com/api/settings/changeRole/"+e,{role_id:t.target.value,user_id:e},Object(d.b)()).then(function(t){s.$swal({icon:"success",title:"Updated role success",text:""})}).catch(function(t){Object(d.d)(t.response.status),s.$swal({icon:"error",title:"Cannot update role",text:""})})}}),created:function(){var t=this.$route.params.id;this.getUser(t),this.getAllGroups(),this.getLicense(t)},computed:c()({},Object(f.c)({groups:function(t){return t.groups.all}})),data:function(){return{user:{},form:new u.a({licenseId:"",type:"",account_id:""}),formDelete:new u.a({type:"confirm"}),msg:"Welcome to Your Vue.js App",currentSort:"statusKey",currentSortDir:"asc",licenses:[],columns:["","Product","Status","License type","Available seats","Available seats","Available seats",""]}}},h={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"users-page user-detail-page",attrs:{id:"page-wrapper"}},[s("div",{staticClass:"container-fluid manage-license-page"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-lg-12"},[s("h1",{staticClass:"page-header"},[t._v("View user")]),t._v(" "),s("router-link",{staticClass:"text-primary",attrs:{to:"/admin/users/grid"}},[s("i",{staticClass:"fa fa-long-arrow-left"}),t._v(" Back to list")])],1)]),t._v(" "),s("div",{staticClass:"row mt-20 cs-view-user"},[t.user?s("div",{staticClass:"col-sm-12 col-md-2"},[s("img",{staticClass:"img-rounded img-responsive",attrs:{src:t.user.avatarUrl}}),t._v(" "),s("h3",{staticClass:"h3-left"},[t._v(t._s(t.user.name))]),t._v(" "),s("p",[s("strong",[t._v("Email: ")]),t._v(" "+t._s(t.user.email)),s("br")]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"sel1"}},[t._v("User role:")]),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.user.role,expression:"user.role"}],staticClass:"form-control",attrs:{name:"role",id:"sel1"},on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.user,"role",e.target.multiple?s:s[0])},function(e){return t.onChangeRole(e)}]}},[s("option",{attrs:{value:"0"}},[t._v("User")]),t._v(" "),s("option",{attrs:{value:"1"}},[t._v("Admin")])])]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"sel12"}},[t._v("Group:")]),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.user.groupId,expression:"user.groupId"}],staticClass:"form-control",attrs:{id:"sel12"},on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.user,"groupId",e.target.multiple?s:s[0])},function(e){return t.onChangeGroup(e)}]}},[s("option",{attrs:{value:""}},[t._v("Select Group")]),t._v(" "),t._l(t.groups.items,function(e){return s("option",{domProps:{value:e.id}},[t._v("\r\n                            "+t._s(e.name)+"\r\n                        ")])})],2)]),t._v(" "),t._m(0)]):t._e(),t._v(" "),s("div",{staticClass:"col-sm-12 col-md-10"},[t._m(1),t._v(" "),s("div",{staticClass:"row licenses-page "},[s("div",{staticClass:"col-lg-12"},[s("div",{staticClass:"panel panel-default"},[s("div",{staticClass:"panel-body"},[s("div",{staticClass:"table-responsive"},[s("table",{staticClass:"table table-hover table-user-detail"},[t._m(2),t._v(" "),t._m(3),t._v(" "),s("tbody",[t._l(t.licenses,function(e){return[s("tr",{staticClass:"r-line"},[s("td",{on:{click:function(t){e.contentVisible=!e.contentVisible}}},[s("i",{staticClass:"fa",class:[e.contentVisible?"fa-angle-down":"fa-angle-right"]})]),t._v(" "),s("td",{on:{click:function(t){e.contentVisible=!e.contentVisible}}},[s("img",{staticClass:"product-thumb",attrs:{src:e.product.imageUrl}}),t._v(t._s(e.product.name))]),t._v(" "),s("td",{staticClass:"status pading-only"},[s("span",{domProps:{innerHTML:t._s(e.status)}})]),t._v(" "),s("td",{on:{click:function(t){e.contentVisible=!e.contentVisible}}},[e.scheme?s("span",{staticClass:"sub-type-main"},[t._v("\r\n                                                            "+t._s(e.scheme.kindDisplay)+",")]):t._e(),t._v(" "),s("i",{staticClass:"sub-type color-primary"},[t._v(" "+t._s(e.typeDisplay))])]),t._v(" "),s("td",{on:{click:function(t){e.contentVisible=!e.contentVisible}}},[t._v(t._s(e.seatDisplay))]),t._v(" "),s("td",{staticClass:"text-center"},[s("btn-switch",{attrs:{val:e.assign,parentData:t.user.account_id,parentExt:e.id},on:{isChecked:t.handleChangeBtn}})],1)]),t._v(" "),e.contentVisible?s("tr",[s("td"),t._v(" "),s("td",{attrs:{colspan:"1"}},[s("div",{staticClass:"pd-right-1"},[s("p",[s("span",{staticClass:"bold inline"},[t._v("Available version:")]),t._v(" "+t._s(e.version_limit)+" ")])])]),t._v(" "),s("td",[s("div",{staticClass:"pd-right-2"},[s("p",[s("span",{staticClass:"bold inline"},[t._v("License email:")]),s("br"),t._v(" "),t._l(e.licenseEmails,function(e){return s("span",[e.email?s("span",[t._v(" "+t._s(e.email)+" "),s("br")]):t._e()])})],2),t._v(" "),s("p",[s("span",{staticClass:"bold inline"},[t._v("Owner:")]),t._v(" "+t._s(e.account.name)+" ")])])]),t._v(" "),s("td",{staticClass:"pd-left-9",attrs:{colspan:"2"}},[s("div",{staticClass:"pd-right-3"},[s("p",[s("span",{staticClass:"bold"},[t._v("Active users:")]),t._v(" "),null==e.seatAccounts||0===e.seatAccounts.length?s("span",[t._v("None")]):t._e(),t._v(" "),t._l(e.seatAccounts,function(a,n){return s("span",[a.email?s("span",[t._v(" "+t._s(a.email)+" "),s("a",{staticClass:"cursor-pointer hidden",attrs:{"data-toggle":"tooltip","data-placement":"top",title:"Free up seat"},on:{click:function(s){t.removeAccountOutSeat(a.seat_id),t.$delete(e.seatAccounts,n),e.activeUsers=e.activeUsers-1}}},[s("i",{staticClass:"fa fa-user"}),s("i",{staticClass:"fa fa-plus"})]),s("br")]):t._e()])})],2)])]),t._v(" "),s("td")]):t._e()]}),t._v(" "),null==t.licenses||0===t.licenses.length?s("tr",[s("td",{staticClass:"text-center",attrs:{colspan:"8"}},[t._v(" No Match Found")])]):t._e()],2)])])])])])])])]),t._v(" "),s("div",{staticClass:"modal fade",attrs:{id:"myModalDelete",role:"dialog"}},[s("div",{staticClass:"modal-dialog modal-sm popup-user-delete"},[s("div",{staticClass:"modal-content"},[s("div",{staticClass:"modal-body  text-center"},[s("form",{attrs:{role:"form"},on:{submit:function(e){return e.preventDefault(),t.confirmCode(e)},keydown:function(e){return t.form.onKeydown(e)}}},[s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal"}},[t._v("×")]),t._v(" "),t._m(4),t._v(" "),s("div",{staticClass:"modal-button"},[s("button",{staticClass:"btn btn-primary",attrs:{type:"submit",disabled:t.form.busy}},[t._v("Delete")]),t._v(" "),s("button",{staticClass:"btn btn-default",attrs:{type:"button","data-dismiss":"modal"}},[t._v("Cancel")])])])])])])]),t._v(" "),s("component-popup-confirm",{attrs:{user:t.user}})],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticClass:"btn btn-info btn-delete btn-primary",attrs:{type:"button","data-toggle":"modal","data-target":"#myModalDelete"}},[e("i",{staticClass:"far fa-trash-alt"}),this._v(" Remove user")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"row"},[e("div",{staticClass:"col-lg-6 sort-left"},[e("h3",{staticClass:"mg-top-2"},[this._v("User's products: ")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("colgroup",[e("col",{attrs:{width:"62px"}}),this._v(" "),e("col",{attrs:{width:"24.2%"}}),this._v(" "),e("col",{attrs:{width:"20%"}}),this._v(" "),e("col",{attrs:{width:"20%"}}),this._v(" "),e("col",{attrs:{width:"20%"}}),this._v(" "),e("col",{attrs:{width:"10%"}})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th"),t._v(" "),s("th",[t._v("Product ")]),t._v(" "),s("th",[t._v("Status ")]),t._v(" "),s("th",[t._v("License type")]),t._v(" "),s("th",[t._v("Seat limit/Seats in use")]),t._v(" "),s("th",{staticClass:"text-center"},[t._v("Assign")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h5",{staticClass:"modal-title"},[this._v("Are you sure you want to delete"),e("br"),this._v(" your account?")])}]};var g=s("VU/8")(_,h,!1,function(t){s("PP/d")},"data-v-4f69a38c",null);e.default=g.exports},Hp41:function(t,e,s){"use strict";s("7+uW");var a={name:"BtnSwitch",data:function(){return{msg:"Welcome to btn switch"}},props:["val","parentData","parentExt"],methods:{handleChange:function(t){var e={parentData:this.parentData,parentExt:this.parentExt,checked:t.target.checked};this.$emit("isChecked",e)}},created:function(){}},n={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"btn-switch"},[s("label",{staticClass:"switch"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.val,expression:"val"}],attrs:{type:"checkbox",name:"assign"},domProps:{checked:Array.isArray(t.val)?t._i(t.val,null)>-1:t.val},on:{change:[function(e){var s=t.val,a=e.target,n=!!a.checked;if(Array.isArray(s)){var r=t._i(s,null);a.checked?r<0&&(t.val=s.concat([null])):r>-1&&(t.val=s.slice(0,r).concat(s.slice(r+1)))}else t.val=n},function(e){return t.handleChange(e)}]}}),t._v(" "),t._m(0)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"slider round"},[e("span",{staticClass:"on"},[this._v("ON")]),e("span",{staticClass:"off"},[this._v("OFF")])])}]},r=s("VU/8")(a,n,!1,null,null,null);e.a=r.exports},"PP/d":function(t,e){},T2JI:function(t,e){}});
//# sourceMappingURL=8.56c98313949f623e7fcf.js.map