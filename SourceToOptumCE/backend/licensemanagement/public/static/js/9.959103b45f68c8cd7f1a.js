webpackJsonp([9],{Hp41:function(t,e,s){"use strict";s("7+uW");var a={name:"BtnSwitch",data:function(){return{msg:"Welcome to btn switch"}},props:["val","parentData","parentExt"],methods:{handleChange:function(t){var e={parentData:this.parentData,parentExt:this.parentExt,checked:t.target.checked};this.$emit("isChecked",e)}},created:function(){}},n={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"btn-switch"},[s("label",{staticClass:"switch"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.val,expression:"val"}],attrs:{type:"checkbox",name:"assign"},domProps:{checked:Array.isArray(t.val)?t._i(t.val,null)>-1:t.val},on:{change:[function(e){var s=t.val,a=e.target,n=!!a.checked;if(Array.isArray(s)){var r=t._i(s,null);a.checked?r<0&&(t.val=s.concat([null])):r>-1&&(t.val=s.slice(0,r).concat(s.slice(r+1)))}else t.val=n},function(e){return t.handleChange(e)}]}}),t._v(" "),t._m(0)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"slider round"},[e("span",{staticClass:"on"},[this._v("ON")]),e("span",{staticClass:"off"},[this._v("OFF")])])}]},r=s("VU/8")(a,n,!1,null,null,null);e.a=r.exports},JHo3:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("Xxa5"),n=s.n(a),r=s("exGp"),i=s.n(r),c=s("Iq8t"),l=(s("NYxO"),s("2gGM")),o=s.n(l),u={name:"ManageLicense",components:{BtnSwitch:s("Hp41").a},data:function(){return{msg:"Welcome to Your Vue.js App",license:{},members:[],userFilterKey:"all",userSelected:"",loading:!0,form:new o.a({licenseId:"",type:"",account_id:""})}},methods:{filterByNameOrEmail:function(t){if(t.member){var e=t.member.name.toString().toLowerCase(),s=t.member.email.toString().toLowerCase();if(null!=this.userSelected&&""!=this.userSelected){var a=this.userSelected.toString().toLowerCase();return e.includes(a)||s.includes(a)}return!0}return!0},handleChangeAutomaticAssign:function(t){var e=this;return i()(n.a.mark(function s(){var a;return n.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return e.form.licenseId=t.parentData,e.form.type=t.checked?1:0,a=e,s.next=5,e.form.post("https://account.optumce.com/api/licenses/automatic_assign",Object(c.b)()).then(function(t){var s=t.data;e.form.reset(),a.$swal({icon:"success",title:s.message,text:""})}).catch(function(t){Object(c.d)(t.response.status),a.$swal({icon:"error",title:"An error occurred. Please try again",text:""})});case 5:case"end":return s.stop()}},s,e)}))()},handleChangeBtn:function(t){var e=t.checked?"Assign":"UnAssign";this.handleChange(e,t.parentData.member.account_id)},handleChange:function(t,e){var s=this;return i()(n.a.mark(function a(){var r;return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return s.form.account_id=e,s.form.type=t,s.form.licenseId=s.$route.params.id,r=s,a.next=6,s.form.post("https://account.optumce.com/api/licenses/assign",Object(c.b)()).then(function(t){var e=t.data;r.getUser(),s.form.reset(),r.$swal({icon:"success",title:e.message,text:""})}).catch(function(t){Object(c.d)(t.response.status),t.response.data.stauts||r.getUser(),t.response.data.message&&r.$swal({icon:"error",title:t.response.data.message,text:""})});case 6:case"end":return a.stop()}},a,s)}))()},assignUsers:function(t){var e=this;return i()(n.a.mark(function s(){var a;return n.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return e.form.type=t,a=e,e.form.licenseId=e.$route.params.id,s.next=5,e.form.post("https://account.optumce.com/api/licenses/assignUsers",Object(c.b)()).then(function(t){var s=t.data;a.getUser(),e.form.reset(),a.$swal({icon:"success",title:s.message,text:""})}).catch(function(t){Object(c.d)(t.response.status),t.response.data.message&&a.$swal({icon:"error",title:t.response.data.message,text:""})});case 5:case"end":return s.stop()}},s,e)}))()},getUser:function(){var t=this,e=this.$route.params.id;this.$http.get("https://account.optumce.com/api/licenses/getDetail/"+e,Object(c.b)()).then(function(e){t.license=e.data.license,t.members=e.data.members,t.loading=!1}).catch(function(t){Object(c.d)(t.response.status),t.response.data.message&&__this.$swal({icon:"error",title:t.response.data.message,text:""})})}},created:function(){this.getUser()},computed:{filteredRows:function(){return this[this.userFilterKey]},all:function(){return this.members},apply:function(){return this.members.filter(this.filterByNameOrEmail)}}},d={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"users-page manage-license-page",attrs:{id:"page-wrapper"}},[s("div",{staticClass:"container-fluid"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-lg-12"},[s("h1",{staticClass:"page-header Manage-header"},[t._v("Manage license")]),t._v(" "),s("router-link",{staticClass:"text-primary btn-back-to-list",attrs:{to:"/admin/licenses"}},[s("i",{staticClass:"fa fa-long-arrow-left"}),t._v(" Back to list")])],1)]),t._v(" "),t.loading?t._e():s("div",{staticClass:"row mt-35"},[t.license.product?s("div",{staticClass:"col-sm-12 col-md-3"},[s("img",{staticClass:"product-thumb",attrs:{src:t.license.product.imageUrl}}),t._v(" "),s("h3",{staticClass:"name"},[t._v(t._s(t.license.product.name))]),t._v(" "),s("div",{staticClass:"left-content"},[s("p",[s("strong",[t._v("License: ")]),t._v(" "),s("span",{staticClass:"sub-type-main"},[t._v(t._s(t.license.scheme.kindDisplay)+",")]),t._v(" "),s("i",{staticClass:"sub-type color-primary"},[t._v(" "+t._s(t.license.scheme.typeDisplay))])]),t._v(" "),s("p",[s("strong",[t._v("Available seats:")]),t._v(" "+t._s(t.license.availableSeats))]),t._v(" "),s("p",[s("strong",[t._v("Status:")]),t._v(" "),s("span",{staticClass:"status",domProps:{innerHTML:t._s(t.license.status)}})]),t._v(" "),s("p",[s("strong",[t._v("Expiry date:")]),t._v(" "+t._s(t.license.expiry_date)+" ")]),t._v(" "),s("p",[s("strong",[t._v("Available Domain:")]),t._v(" "+t._s(t.license.available_domain))]),t._v(" "),s("p",[s("strong",[t._v("Arbitrary domain restriction:")]),1==t.license.arbitrary_domain?s("span",[t._v("Yes")]):s("span",[t._v("No")])]),t._v(" "),s("p",[s("strong",[t._v("Automatic assign user: ")]),s("btn-switch",{attrs:{val:t.license.automatic_assign,parentData:t.license.id},on:{isChecked:t.handleChangeAutomaticAssign}})],1)])]):t._e(),t._v(" "),s("div",{staticClass:"col-sm-12 col-md-8"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-lg-12 sort-left manage-edit"},[s("span",{staticClass:"fl-left-manage"},[t._v("Assigned users ")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.userSelected,expression:"userSelected"}],staticClass:"form-control search-input",attrs:{type:"text",name:"search",placeholder:"Search users..."},domProps:{value:t.userSelected},on:{input:function(e){e.target.composing||(t.userSelected=e.target.value)}}}),t._v(" "),s("button",{staticClass:"btn btn-search",on:{click:function(e){t.userFilterKey="apply"}}},[s("i",{staticClass:"fa fa-search"})]),t._v(" "),s("button",{staticClass:"btn btn-addnew",on:{click:function(e){return t.assignUsers("Assign")}}},[t._v("\r\n                            Assign all users "),s("i",{staticClass:"fa fa-plus"})]),t._v(" "),s("button",{staticClass:"btn btn-black",on:{click:function(e){return t.assignUsers("Unassign")}}},[t._v("\r\n                            Unassign all users "),s("i",{staticClass:"fa fa-times"})])])]),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col-lg-12 table-manager"},[s("div",{staticClass:"panel panel-default"},[s("div",{staticClass:"panel-body"},[s("div",{staticClass:"table-responsive"},[s("table",{staticClass:"table table-users"},[t._m(0),t._v(" "),t._m(1),t._v(" "),s("tbody",[t._l(t.filteredRows,function(e,a){return e.member?s("tr",{key:a,staticClass:"r-line mr-32"},[s("td",[t._v(t._s(e.member.name))]),t._v(" "),s("td",[t._v(t._s(e.member.email))]),t._v(" "),s("td",[t._v(t._s(e.member.group))]),t._v(" "),s("td",[s("btn-switch",{attrs:{val:e.assign,parentData:e},on:{isChecked:t.handleChangeBtn}})],1)]):t._e()}),t._v(" "),null==t.members||0===t.members.length||0===t.filteredRows.length?s("tr",[s("td",{staticClass:"text-center",attrs:{colspan:"4"}},[t._v(" Empty Data")])]):t._e()],2)])])])])])])])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("colgroup",[e("col",{attrs:{width:"30%"}}),this._v(" "),e("col",{attrs:{width:"30%"}}),this._v(" "),e("col",{attrs:{width:"20%"}}),this._v(" "),e("col",{attrs:{width:"20%"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("th",[this._v("Name "),e("i",{staticClass:"fa fa-sort-amount-desc"})]),this._v(" "),e("th",[this._v("Email")]),this._v(" "),e("th",[this._v("Group")]),this._v(" "),e("th",{staticClass:"txt-right"},[this._v("Assign")])])])}]};var m=s("VU/8")(u,d,!1,function(t){s("WLV8")},"data-v-319f31ed",null);e.default=m.exports},WLV8:function(t,e){}});
//# sourceMappingURL=9.959103b45f68c8cd7f1a.js.map