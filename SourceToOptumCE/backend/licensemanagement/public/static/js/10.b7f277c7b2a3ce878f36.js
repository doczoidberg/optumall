webpackJsonp([10],{"8LYI":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s("Xxa5"),a=s.n(n),i=s("exGp"),r=s.n(i),c=s("Dd8w"),l=s.n(c),o=s("2gGM"),u=s.n(o),d=s("Iq8t"),v=s("NYxO"),p={name:"UserLicenses",created:function(){this.getAllLicenses(),this.getAllProducts()},data:function(){return{msg:"Licenses",userFilterKey:"apply",currentSort:"statusKey",currentSortDir:"asc",productSelected:null,typeSelected:null,statusSelected:null,LicenseTypes:[{value:null,text:"License types"},{value:3,text:"Single license"},{value:2,text:"Multi license"},{value:1,text:"Academic license"},{value:0,text:"Trial license"}],Status:[{value:null,text:"Status"},{value:2,text:"Active"},{value:3,text:"Expired"},{value:1,text:"Verification required"},{value:0,text:"Available"}],columns:["","Product","Status","License type","Available seats","Available seats","Available seats",""],form:new u.a({id:"",type:0,userId:0})}},methods:l()({},Object(v.b)("licenses",{getAllLicenses:"getAll"}),Object(v.b)("products",{getAllProducts:"getAll"}),{sendMail:function(t,e){var s=this;return r()(a.a.mark(function n(){var i;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return s.form.id=e,s.form.type=t,i=s,n.next=5,s.form.post("/api/licenses/sendMail",Object(d.b)()).then(function(t){var e=t.data;i.$swal({icon:"success",html:"<h4>An activation email has been sent to "+e.email+".<br/> Please check your email!</h4>",text:""})}).catch(function(t){Object(d.d)(t.response.status),i.$swal({icon:"error",title:"Cannot re-send. Please contact support!",text:""})});case 5:case"end":return n.stop()}},n,s)}))()},sendActivate:function(t,e){var s=this;return r()(a.a.mark(function n(){var i;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return s.form.id=e,s.form.type=t,i=s,n.next=5,s.form.post("/api/licenses/activeLicense",Object(d.b)()).then(function(t){var e=t.data;e.stauts&&(s.getAllLicenses(),i.$swal({icon:"success",title:"Your license has been activated successfully.<br/> You can now download the software.",text:""}))}).catch(function(t){Object(d.d)(t.response.status),i.$swal({icon:"error",title:"Your license is not activated successfully.<br/> Please contact support!",text:""})});case 5:case"end":return n.stop()}},n,s)}))()},removeAccountOutSeat:function(t){var e=this;return r()(a.a.mark(function s(){var n;return a.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return e.form.seat_id=t,n=e,s.next=4,e.form.post("/api/licenses/removeAccountOutSeat",Object(d.b)()).then(function(t){var s=t.data;e.form.reset(),n.$swal({icon:"success",title:s.message,text:""})}).catch(function(t){Object(d.d)(t.response.status),n.$swal({icon:"error",title:t.response.data.message,text:""})});case 4:case"end":return s.stop()}},s,e)}))()},sort:function(t){this.userFilterKey="apply",t===this.currentSort&&(this.currentSortDir="asc"===this.currentSortDir?"desc":"asc"),this.currentSort=t},showRow:function(t){this.contentVisible=!this.contentVisible},clearInput:function(){this.productSelected=null,this.statusSelected=null,this.typeSelected=null,this.userFilterKey="apply",this.sort="asc"},filterByProductName:function(t){if(t.product){var e=t.product_id.toString().toLowerCase();if(null!=this.productSelected){var s=this.productSelected.toString().toLowerCase();return e.includes(s)}return!0}return!0},filterByStatus:function(t){var e=t.statusKey.toString().toLowerCase();if(null!=this.statusSelected){var s=this.statusSelected.toString().toLowerCase();return e.includes(s)}return!0},filterByType:function(t){if(t.scheme){var e=t.scheme.kind.toString().toLowerCase();if(null!=this.typeSelected){var s=this.typeSelected.toString().toLowerCase();return e.includes(s)}return e}return!0},orderBy:function(t,e){var s=1;return"desc"===this.currentSortDir&&(s=-1),t[this.currentSort]<e[this.currentSort]?-1*s:t[this.currentSort]>e[this.currentSort]?1*s:0}}),computed:l()({},Object(v.c)({licenses:function(t){return t.licenses.all},products:function(t){return t.products.all}}),{filteredRows:function(){return this[this.userFilterKey]},all:function(){return this.licenses.items?this.licenses.items:[]},apply:function(){return this.licenses.items?this.licenses.items.filter(this.filterByProductName).filter(this.filterByStatus).filter(this.filterByType).sort(this.orderBy):[]}})},_={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"licenses-page user-licenses-page",attrs:{id:"page-wrapper"}},[s("div",{staticClass:" container-fluid"},[t._m(0),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col-lg-9 sort-left"},[s("span",{staticClass:"text"},[t._v("Filter list: ")]),t._v("  \r\n                "),t.products.items?s("div",{staticClass:"form-group product"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.productSelected,expression:"productSelected"}],staticClass:"form-control",on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.productSelected=e.target.multiple?s:s[0]}}},[s("option",{attrs:{value:"null"}},[t._v("Products")]),t._v(" "),t._l(t.products.items,function(e){return s("option",{domProps:{value:e.id}},[t._v("\r\n                            "+t._s(e.name)+"\r\n                        ")])})],2)]):t._e(),t._v(" "),s("div",{staticClass:"form-group status"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.statusSelected,expression:"statusSelected"}],staticClass:"form-control",on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.statusSelected=e.target.multiple?s:s[0]}}},t._l(t.Status,function(e){return s("option",{domProps:{value:e.value}},[t._v("\r\n                            "+t._s(e.text)+"\r\n                        ")])}),0)]),t._v(" "),s("div",{staticClass:"form-group license"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.typeSelected,expression:"typeSelected"}],staticClass:"form-control",on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.typeSelected=e.target.multiple?s:s[0]}}},t._l(t.LicenseTypes,function(e){return s("option",{domProps:{value:e.value}},[t._v("\r\n                            "+t._s(e.text)+"\r\n                        ")])}),0)]),t._v(" "),s("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:t.clearInput}},[t._v("Clear")])]),t._v(" "),s("div",{staticClass:"col-lg-3 button-right"},[s("span",[t._v("View as: ")]),t._v("  \r\n                "),s("div",{staticClass:"btn-group",attrs:{role:"group"}},[s("router-link",{staticClass:"btn btn-secondary ",attrs:{to:"/admin/licenses"}},[t._v("Admin")]),t._v(" "),s("button",{staticClass:"btn btn-dark active",attrs:{type:"button"}},[t._v("User")])],1)])]),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col-lg-12"},[s("div",{staticClass:"panel panel-default"},[s("div",{staticClass:"panel-body"},[s("div",{staticClass:"table-responsive"},[s("table",{staticClass:"table table-hover"},[s("thead",[s("tr",[s("th"),t._v(" "),s("th",[t._v("Product ")]),t._v(" "),s("th",[t._v("Status "),s("i",{class:["asc"==t.currentSortDir?"fa fa-sort-amount-asc":"fa fa-sort-amount-desc"],on:{click:function(e){return t.sort("statusKey")}}})]),t._v(" "),s("th",[t._v("License type")]),t._v(" "),s("th",[t._v("Seat limit/Seats in use")]),t._v(" "),s("th",[t._v("Active users")]),t._v(" "),s("th",[t._v("Expiry date ")]),t._v(" "),s("th")])]),t._v(" "),s("tbody",[t._l(t.filteredRows,function(e){return[s("tr",{staticClass:"r-line"},[s("td",{on:{click:function(t){e.contentVisible=!e.contentVisible}}},[s("i",{staticClass:"fa",class:[e.contentVisible?"fa-angle-down":"fa-angle-right"]})]),t._v(" "),s("td",{on:{click:function(t){e.contentVisible=!e.contentVisible}}},[s("img",{staticClass:"product-thumb",attrs:{src:e.product.imageUrl}}),t._v(t._s(e.product.name))]),t._v(" "),s("td",{staticClass:"status",domProps:{innerHTML:t._s(e.status)},on:{click:function(t){e.contentVisible=!e.contentVisible}}}),t._v(" "),s("td",{on:{click:function(t){e.contentVisible=!e.contentVisible}}},[s("span",[s("span",{staticClass:"sub-type-main"},[t._v(t._s(e.scheme?e.scheme.kindDisplay:e.kindDisplay)+",")]),t._v(" "),s("i",{staticClass:"sub-type color-primary"},[t._v(" "+t._s(e.typeDisplay))])])]),t._v(" "),s("td",{on:{click:function(t){e.contentVisible=!e.contentVisible}}},[t._v("\r\n                                                "+t._s(e.seatDisplay)+"\r\n                                            ")]),t._v(" "),s("td",{on:{click:function(t){e.contentVisible=!e.contentVisible}}},[t._v(t._s(e.activeUsers))]),t._v(" "),s("td",{staticClass:"date",class:{status:3==e.statusKey},on:{click:function(t){e.contentVisible=!e.contentVisible}}},[s("span",{class:{"status expired":3==e.statusKey}},[t._v(t._s(e.expiry_date))])]),t._v(" "),s("td",{staticClass:"text-left "},[2==e.statusKey?s("a",{staticClass:"cursor-pointer btn btn-default btn-sm",attrs:{target:"_blank",href:e.product.dowloadUrl,type:"button"}},[t._v("Download newest version")]):t._e(),t._v(" "),3==e.statusKey?s("a",{staticClass:"cursor-pointer color-action",attrs:{target:"_blank",href:"https://optumce.com/get-quote/"}},[t._v("Get quote")]):t._e(),t._v(" "),1==e.statusKey?s("a",{staticClass:"color-action cursor-pointer",on:{click:function(s){return t.sendMail("resend",e.id)}}},[t._v("Resend email")]):t._e(),t._v(" "),e.kindDisplay&&e.id&&e.can_download?s("a",{staticClass:"color-action cursor-pointer",on:{click:function(s){return t.sendActivate("activate",e.id)}}},[t._v("Activate License and Download Software")]):t._e()])]),t._v(" "),e.contentVisible?s("tr",{staticClass:"panel-mini"},[s("td"),t._v(" "),s("td",{attrs:{colspan:"2"}},[s("div",{staticClass:"pd-right-1"},[s("p",[s("span",{staticClass:"bold inline"},[t._v("Available version:")]),t._v(" "+t._s(e.version_limit)+" ")])])]),t._v(" "),s("td",[s("div",{staticClass:"pd-right-2"},[s("p",[s("span",{staticClass:"bold inline"},[t._v("License email:")]),s("br"),t._v(" "),t._l(e.licenseEmails,function(e){return s("span",[e.email?s("span",[t._v(" "+t._s(e.email)+" "),s("br")]):t._e()])})],2),t._v(" "),void 0!=e.account?s("p",[s("span",{staticClass:"bold inline"},[t._v("Owner:")]),t._v(" "+t._s(e.account.name)+" ")]):t._e()])]),t._v(" "),s("td",{attrs:{colspan:"2"}},[s("div",{staticClass:"pd-right-3"},[s("p",[s("span",{staticClass:"bold"},[t._v("Active users:")]),t._v(" "),null==e.seatAccounts||0===e.seatAccounts.length?s("span",[t._v("None")]):t._e(),t._v(" "),t._l(e.seatAccounts,function(n,a){return s("span",[n.email?s("span",[t._v(" "+t._s(n.email)+" "),s("a",{staticClass:"cursor-pointer hidden",attrs:{"data-toggle":"tooltip","data-placement":"top",title:"Free up seat"},on:{click:function(s){t.removeAccountOutSeat(n.seat_id),t.$delete(e.seatAccounts,a),e.activeUsers=e.activeUsers-1}}},[s("i",{staticClass:"fa fa-user"}),s("i",{staticClass:"fa fa-plus"})]),s("br")]):t._e()])})],2)])]),t._v(" "),s("td"),t._v(" "),s("td")]):t._e()]}),t._v(" "),null==t.licenses.items||0===t.licenses.items.length||0===t.filteredRows.length?s("tr",[s("td",{staticClass:"text-center",attrs:{colspan:"8"}},[t._v(" No Match Found")])]):t._e()],2)])])])])])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"row"},[e("div",{staticClass:"col-lg-12"},[e("h1",{staticClass:"page-header"},[this._v("All licenses")])])])}]};var f=s("VU/8")(p,_,!1,function(t){s("DzPi")},"data-v-98fdd370",null);e.default=f.exports},DzPi:function(t,e){}});
//# sourceMappingURL=10.b7f277c7b2a3ce878f36.js.map