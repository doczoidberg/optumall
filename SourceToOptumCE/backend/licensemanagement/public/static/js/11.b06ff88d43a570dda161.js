webpackJsonp([11],{"B6/e":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s("Xxa5"),i=s.n(n),a=s("exGp"),r=s.n(a),c=s("Dd8w"),l=s.n(c),o=s("Iq8t"),u=s("NYxO"),d=s("2gGM"),v=s.n(d),p=s("7+uW"),f={name:"Licenses",created:function(){this.getAllLicenses(),this.getAllProducts(),setTimeout(function(){p.a.nextTick(function(){$('[data-toggle="tooltip"]').tooltip()})},2e3)},data:function(){return{msg:"Licenses",userFilterKey:"apply",currentSort:"statusKey",currentSortDir:"asc",productSelected:null,typeSelected:null,statusSelected:null,LicenseTypes:[{value:null,text:"License types"},{value:3,text:"Single license"},{value:2,text:"Multi license"},{value:1,text:"Academic license"},{value:0,text:"Trial license"}],Status:[{value:null,text:"Status"},{value:2,text:"Active"},{value:3,text:"Expired"},{value:1,text:"Verification required"},{value:0,text:"Available"}],form:new v.a({licenseId:"",type:"",account_id:""}),columns:["","Product","Status","License type","Available seats","Available seats","Available seats",""]}},methods:l()({},Object(u.b)("licenses",{getAllLicenses:"getAllByAdmin"}),Object(u.b)("products",{getAllProducts:"getAll"}),{assignUsers:function(t,e,s){var n=this;return r()(i.a.mark(function a(){var r;return i.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return n.form.type=t,n.form.account_id=e,n.form.licenseId=s,r=n,i.next=6,n.form.post("https://account.optumce.com/api/licenses/assign",Object(o.b)()).then(function(t){var e=t.data;n.form.reset(),r.$swal({icon:"success",title:e.message,text:""})}).catch(function(t){Object(o.d)(t.response.status),r.$swal({icon:"error",title:t.response.data.message,text:""})});case 6:case"end":return i.stop()}},a,n)}))()},removeAccountOutSeat:function(t){var e=this;return r()(i.a.mark(function s(){var n;return i.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return e.form.seat_id=t,n=e,s.next=4,e.form.post("https://account.optumce.com/api/licenses/removeAccountOutSeat",Object(o.b)()).then(function(t){var s=t.data;e.form.reset(),n.$swal({icon:"success",title:s.message,text:""})}).catch(function(t){Object(o.d)(t.response.status),n.$swal({icon:"error",title:t.response.data.message,text:""})});case 4:case"end":return s.stop()}},s,e)}))()},sort:function(t){this.userFilterKey="apply",t===this.currentSort&&(this.currentSortDir="asc"===this.currentSortDir?"desc":"asc"),this.currentSort=t},showRow:function(t){this.contentVisible=!this.contentVisible},clearInput:function(){this.productSelected=null,this.statusSelected=null,this.typeSelected=null,this.userFilterKey="apply",this.sort="asc"},filterByProductName:function(t){if(t.product){var e=t.product_id.toString().toLowerCase();if(null!=this.productSelected){var s=this.productSelected.toString().toLowerCase();return e.includes(s)}return!0}return!0},filterByStatus:function(t){if(void 0==t.statusKey)return!0;var e=t.statusKey.toString().toLowerCase();if(null!=this.statusSelected){var s=this.statusSelected.toString().toLowerCase();return e.includes(s)}return!0},filterByType:function(t){if(t.scheme){var e=t.scheme.kind.toString().toLowerCase();if(null!=this.typeSelected){var s=this.typeSelected.toString().toLowerCase();return e.includes(s)}return e}return!0},orderBy:function(t,e){var s=1;return"desc"===this.currentSortDir&&(s=-1),t[this.currentSort]<e[this.currentSort]?-1*s:t[this.currentSort]>e[this.currentSort]?1*s:0}}),computed:l()({},Object(u.c)({licenses:function(t){return t.licenses.all},products:function(t){return t.products.all}}),{filteredRows:function(){return this[this.userFilterKey]},all:function(){return this.licenses.items?this.licenses.items:[]},apply:function(){return this.licenses.items?this.licenses.items.filter(this.filterByProductName).filter(this.filterByStatus).filter(this.filterByType).sort(this.orderBy):[]}})},_={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"licenses-page",attrs:{id:"page-wrapper"}},[s("div",{staticClass:" container-fluid"},[t._m(0),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col-xs-12 col-lg-9 sort-left"},[s("span",{staticClass:"text"},[t._v("Filter list: ")]),t._v("  \r\n                "),t.products.items?s("div",{staticClass:"form-group product"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.productSelected,expression:"productSelected"}],staticClass:"form-control",on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.productSelected=e.target.multiple?s:s[0]}}},[s("option",{attrs:{value:"null"}},[t._v("Products")]),t._v(" "),t._l(t.products.items,function(e){return s("option",{domProps:{value:e.id}},[t._v("\r\n                            "+t._s(e.name)+"\r\n                        ")])})],2)]):t._e(),t._v(" "),s("div",{staticClass:"form-group status"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.statusSelected,expression:"statusSelected"}],staticClass:"form-control",on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.statusSelected=e.target.multiple?s:s[0]}}},t._l(t.Status,function(e){return s("option",{domProps:{value:e.value}},[t._v("\r\n                            "+t._s(e.text)+"\r\n                        ")])}),0)]),t._v(" "),s("div",{staticClass:"form-group license"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.typeSelected,expression:"typeSelected"}],staticClass:"form-control",on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.typeSelected=e.target.multiple?s:s[0]}}},t._l(t.LicenseTypes,function(e){return s("option",{domProps:{value:e.value}},[t._v("\r\n                            "+t._s(e.text)+"\r\n                        ")])}),0)]),t._v(" "),s("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:t.clearInput}},[t._v("Clear")])]),t._v(" "),s("div",{staticClass:"col-xs-12 col-lg-3 button-right"},[s("span",[t._v("View as: ")]),t._v("  \r\n                "),s("div",{staticClass:"btn-group",attrs:{role:"group"}},[s("button",{staticClass:"btn btn-dark active",attrs:{type:"button"}},[t._v("Admin")]),t._v(" "),s("router-link",{staticClass:"btn btn-secondary",attrs:{to:"/admin/licenses-as-user"}},[t._v("User")])],1)])]),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col-lg-12"},[s("div",{staticClass:"panel panel-default"},[s("div",{staticClass:"panel-body"},[s("div",{staticClass:"table-responsive"},[s("table",{staticClass:"table table-hover"},[t._m(1),t._v(" "),s("tbody",[t._l(t.filteredRows,function(e){return[s("tr",{staticClass:"r-line"},[s("td",{on:{click:function(t){e.contentVisible=!e.contentVisible}}},[s("i",{staticClass:"fa",class:[e.contentVisible?"fa-angle-down":"fa-angle-right"]})]),t._v(" "),s("td",{on:{click:function(t){e.contentVisible=!e.contentVisible}}},[s("img",{staticClass:"product-thumb",attrs:{src:e.product.imageUrl}}),t._v(t._s(e.product.name))]),t._v(" "),s("td",{on:{click:function(t){e.contentVisible=!e.contentVisible}}},[e.scheme?s("span",{staticClass:"sub-type-main"},[t._v(t._s(e.scheme.kindDisplay)+",")]):t._e(),t._v(" "),s("i",{staticClass:"sub-type color-primary"},[t._v(" "+t._s(e.typeDisplay))])]),t._v(" "),s("td",{on:{click:function(t){e.contentVisible=!e.contentVisible}}},[t._v(t._s(e.seatDisplay))]),t._v(" "),s("td",{staticClass:"status color-red",domProps:{innerHTML:t._s(e.expiry_date)},on:{click:function(t){e.contentVisible=!e.contentVisible}}}),t._v(" "),s("td",{staticClass:"fl-right text-center"},[s("router-link",{staticClass:"btn btn-default btn-sm",attrs:{to:{name:"ManageLicense",params:{id:e.id}}}},[t._v("Manage license ")])],1)]),t._v(" "),e.contentVisible?s("tr",{staticClass:"panel-mini"},[s("td"),t._v(" "),s("td",{attrs:{colspan:"1"}},[s("div",{staticClass:"pd-right-1"},[s("p",[s("span",{staticClass:"bold inline"},[t._v("Available version:")]),t._v(" "+t._s(e.version_limit)+" ")])])]),t._v(" "),s("td",{attrs:{colspan:"1"}},[s("div",{staticClass:"pd-right-2"},[s("p",[s("span",{staticClass:"bold"},[t._v("Groups:")]),t._v(" "),t._l(e.groups,function(e){return s("span",[t._v(t._s(e)+" "),s("br")])})],2)])]),t._v(" "),s("td",{attrs:{colspan:"2"}},[s("div",{staticClass:"pd-right-3"},[s("p",[s("span",{staticClass:"bold"},[t._v("Active users:")]),t._v(" "),null==e.seatAccounts||0===e.seatAccounts.length?s("span",[t._v("None")]):t._e(),t._v(" "),t._l(e.seatAccounts,function(n,i){return s("span",[n.email?s("span",[t._v(" "+t._s(n.email)+" "),s("a",{staticClass:"cursor-pointer hidden",attrs:{"data-toggle":"tooltip","data-placement":"top",title:"Free up seat"},on:{click:function(s){t.removeAccountOutSeat(n.seat_id),t.$delete(e.seatAccounts,i),e.activeUsers=e.activeUsers-1}}},[s("i",{staticClass:"fa fa-user"}),s("i",{staticClass:"fa fa-plus"})]),s("br")]):t._e()])})],2)])]),t._v(" "),s("td")]):t._e()]}),t._v(" "),null==t.licenses.items||0===t.licenses.items.length||0===t.filteredRows.length?s("tr",[s("td",{staticClass:"text-center",attrs:{colspan:"7"}},[t._v(" No Match Found")])]):t._e()],2)])])])])])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"row"},[e("div",{staticClass:"col-lg-12"},[e("h1",{staticClass:"page-header"},[this._v("All licenses")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th"),t._v(" "),s("th",[t._v("Product ")]),t._v(" "),s("th",[t._v("License type")]),t._v(" "),s("th",{},[t._v("Seat limit/Seats in use")]),t._v(" "),s("th",[t._v("Expiry date ")]),t._v(" "),s("th",{staticClass:"text-center"})])])}]};var m=s("VU/8")(f,_,!1,function(t){s("ZwzQ")},"data-v-8546f81e",null);e.default=m.exports},ZwzQ:function(t,e){}});
//# sourceMappingURL=11.b06ff88d43a570dda161.js.map