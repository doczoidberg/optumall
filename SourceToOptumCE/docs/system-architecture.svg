<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1400 1100">
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#666"/>
    </marker>
    <marker id="arrowhead-blue" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#3b82f6"/>
    </marker>
    <marker id="arrowhead-green" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#22c55e"/>
    </marker>
    <linearGradient id="headerGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#1e40af"/>
      <stop offset="100%" style="stop-color:#3b82f6"/>
    </linearGradient>
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="2" dy="2" stdDeviation="3" flood-opacity="0.2"/>
    </filter>
  </defs>

  <!-- Background -->
  <rect width="1400" height="1100" fill="#f8fafc"/>

  <!-- Title -->
  <rect x="0" y="0" width="1400" height="60" fill="url(#headerGrad)"/>
  <text x="700" y="38" text-anchor="middle" fill="white" font-family="Arial, sans-serif" font-size="24" font-weight="bold">License Management System - Architecture Overview</text>

  <!-- ==================== USER ROLES SECTION ==================== -->
  <g transform="translate(50, 80)">
    <rect width="280" height="200" rx="10" fill="#fef3c7" stroke="#f59e0b" stroke-width="2" filter="url(#shadow)"/>
    <rect width="280" height="35" rx="10" fill="#f59e0b"/>
    <text x="140" y="24" text-anchor="middle" fill="white" font-family="Arial, sans-serif" font-size="14" font-weight="bold">USER ROLES (identity.role)</text>

    <!-- Role 0: User -->
    <g transform="translate(20, 50)">
      <rect width="240" height="40" rx="5" fill="#dbeafe" stroke="#3b82f6"/>
      <circle cx="25" cy="20" r="15" fill="#3b82f6"/>
      <text x="25" y="25" text-anchor="middle" fill="white" font-family="Arial, sans-serif" font-size="12" font-weight="bold">0</text>
      <text x="55" y="18" fill="#1e40af" font-family="Arial, sans-serif" font-size="13" font-weight="bold">User</text>
      <text x="55" y="32" fill="#64748b" font-family="Arial, sans-serif" font-size="10">View own licenses, profile</text>
    </g>

    <!-- Role 1: Admin -->
    <g transform="translate(20, 100)">
      <rect width="240" height="40" rx="5" fill="#dcfce7" stroke="#22c55e"/>
      <circle cx="25" cy="20" r="15" fill="#22c55e"/>
      <text x="25" y="25" text-anchor="middle" fill="white" font-family="Arial, sans-serif" font-size="12" font-weight="bold">1</text>
      <text x="55" y="18" fill="#166534" font-family="Arial, sans-serif" font-size="13" font-weight="bold">Admin</text>
      <text x="55" y="32" fill="#64748b" font-family="Arial, sans-serif" font-size="10">Manage org users, licenses</text>
    </g>

    <!-- Role 2: SuperAdmin -->
    <g transform="translate(20, 150)">
      <rect width="240" height="40" rx="5" fill="#fce7f3" stroke="#ec4899"/>
      <circle cx="25" cy="20" r="15" fill="#ec4899"/>
      <text x="25" y="25" text-anchor="middle" fill="white" font-family="Arial, sans-serif" font-size="12" font-weight="bold">2</text>
      <text x="55" y="18" fill="#9d174d" font-family="Arial, sans-serif" font-size="13" font-weight="bold">SuperAdmin</text>
      <text x="55" y="32" fill="#64748b" font-family="Arial, sans-serif" font-size="10">Full system access, all orgs</text>
    </g>
  </g>

  <!-- ==================== DATABASE SCHEMA SECTION ==================== -->
  <g transform="translate(360, 80)">
    <rect width="700" height="480" rx="10" fill="#f0fdf4" stroke="#22c55e" stroke-width="2" filter="url(#shadow)"/>
    <rect width="700" height="35" rx="10" fill="#22c55e"/>
    <text x="350" y="24" text-anchor="middle" fill="white" font-family="Arial, sans-serif" font-size="14" font-weight="bold">DATABASE SCHEMA (MySQL)</text>

    <!-- Identity Table -->
    <g transform="translate(20, 50)">
      <rect width="150" height="120" rx="5" fill="white" stroke="#3b82f6" stroke-width="2"/>
      <rect width="150" height="25" rx="5" fill="#3b82f6"/>
      <text x="75" y="18" text-anchor="middle" fill="white" font-family="Arial, sans-serif" font-size="11" font-weight="bold">identity (User)</text>
      <text x="10" y="42" fill="#333" font-family="monospace" font-size="9">id (PK)</text>
      <text x="10" y="55" fill="#333" font-family="monospace" font-size="9">account_id (FK)</text>
      <text x="10" y="68" fill="#333" font-family="monospace" font-size="9">email, user_name</text>
      <text x="10" y="81" fill="#ec4899" font-family="monospace" font-size="9" font-weight="bold">role (0,1,2)</text>
      <text x="10" y="94" fill="#333" font-family="monospace" font-size="9">first_name, last_name</text>
      <text x="10" y="107" fill="#333" font-family="monospace" font-size="9">password, email_validated</text>
    </g>

    <!-- Account Table -->
    <g transform="translate(200, 50)">
      <rect width="140" height="90" rx="5" fill="white" stroke="#f59e0b" stroke-width="2"/>
      <rect width="140" height="25" rx="5" fill="#f59e0b"/>
      <text x="70" y="18" text-anchor="middle" fill="white" font-family="Arial, sans-serif" font-size="11" font-weight="bold">account</text>
      <text x="10" y="42" fill="#333" font-family="monospace" font-size="9">id (PK)</text>
      <text x="10" y="55" fill="#333" font-family="monospace" font-size="9">name</text>
      <text x="10" y="68" fill="#333" font-family="monospace" font-size="9">type</text>
      <text x="10" y="81" fill="#333" font-family="monospace" font-size="9">domain</text>
    </g>

    <!-- Account Member Table -->
    <g transform="translate(200, 160)">
      <rect width="140" height="80" rx="5" fill="white" stroke="#8b5cf6" stroke-width="2"/>
      <rect width="140" height="25" rx="5" fill="#8b5cf6"/>
      <text x="70" y="18" text-anchor="middle" fill="white" font-family="Arial, sans-serif" font-size="11" font-weight="bold">account_member</text>
      <text x="10" y="42" fill="#333" font-family="monospace" font-size="9">id, account_id (FK)</text>
      <text x="10" y="55" fill="#333" font-family="monospace" font-size="9">member_id (FK)</text>
      <text x="10" y="68" fill="#8b5cf6" font-family="monospace" font-size="9" font-weight="bold">member_role (0,1)</text>
    </g>

    <!-- Account Group Table -->
    <g transform="translate(20, 190)">
      <rect width="150" height="80" rx="5" fill="white" stroke="#06b6d4" stroke-width="2"/>
      <rect width="150" height="25" rx="5" fill="#06b6d4"/>
      <text x="75" y="18" text-anchor="middle" fill="white" font-family="Arial, sans-serif" font-size="11" font-weight="bold">account_group</text>
      <text x="10" y="42" fill="#333" font-family="monospace" font-size="9">id (PK)</text>
      <text x="10" y="55" fill="#333" font-family="monospace" font-size="9">account_id (FK org)</text>
      <text x="10" y="68" fill="#333" font-family="monospace" font-size="9">name, description</text>
    </g>

    <!-- Group Member Table -->
    <g transform="translate(20, 290)">
      <rect width="150" height="70" rx="5" fill="white" stroke="#06b6d4" stroke-width="2"/>
      <rect width="150" height="25" rx="5" fill="#06b6d4"/>
      <text x="75" y="18" text-anchor="middle" fill="white" font-family="Arial, sans-serif" font-size="11" font-weight="bold">group_member</text>
      <text x="10" y="42" fill="#333" font-family="monospace" font-size="9">id, group_id (FK)</text>
      <text x="10" y="55" fill="#333" font-family="monospace" font-size="9">account_id (FK)</text>
    </g>

    <!-- License Table -->
    <g transform="translate(370, 50)">
      <rect width="160" height="150" rx="5" fill="white" stroke="#ef4444" stroke-width="2"/>
      <rect width="160" height="25" rx="5" fill="#ef4444"/>
      <text x="80" y="18" text-anchor="middle" fill="white" font-family="Arial, sans-serif" font-size="11" font-weight="bold">license</text>
      <text x="10" y="42" fill="#333" font-family="monospace" font-size="9">id (PK)</text>
      <text x="10" y="55" fill="#333" font-family="monospace" font-size="9">owner_id (FK account)</text>
      <text x="10" y="68" fill="#333" font-family="monospace" font-size="9">product_id (FK)</text>
      <text x="10" y="81" fill="#333" font-family="monospace" font-size="9">scheme_id (FK)</text>
      <text x="10" y="94" fill="#333" font-family="monospace" font-size="9">seat_limit, type</text>
      <text x="10" y="107" fill="#333" font-family="monospace" font-size="9">expiry_date</text>
      <text x="10" y="120" fill="#333" font-family="monospace" font-size="9">watermark, description</text>
      <text x="10" y="133" fill="#333" font-family="monospace" font-size="9">life_cycle, features</text>
    </g>

    <!-- Product Table -->
    <g transform="translate(550, 50)">
      <rect width="130" height="80" rx="5" fill="white" stroke="#10b981" stroke-width="2"/>
      <rect width="130" height="25" rx="5" fill="#10b981"/>
      <text x="65" y="18" text-anchor="middle" fill="white" font-family="Arial, sans-serif" font-size="11" font-weight="bold">product</text>
      <text x="10" y="42" fill="#333" font-family="monospace" font-size="9">id (PK)</text>
      <text x="10" y="55" fill="#333" font-family="monospace" font-size="9">code, name</text>
      <text x="10" y="68" fill="#333" font-family="monospace" font-size="9">description</text>
    </g>

    <!-- Scheme Table -->
    <g transform="translate(550, 150)">
      <rect width="130" height="70" rx="5" fill="white" stroke="#6366f1" stroke-width="2"/>
      <rect width="130" height="25" rx="5" fill="#6366f1"/>
      <text x="65" y="18" text-anchor="middle" fill="white" font-family="Arial, sans-serif" font-size="11" font-weight="bold">scheme</text>
      <text x="10" y="42" fill="#333" font-family="monospace" font-size="9">id (PK)</text>
      <text x="10" y="55" fill="#333" font-family="monospace" font-size="9">code, name</text>
    </g>

    <!-- Assignment Table -->
    <g transform="translate(370, 220)">
      <rect width="140" height="70" rx="5" fill="white" stroke="#f97316" stroke-width="2"/>
      <rect width="140" height="25" rx="5" fill="#f97316"/>
      <text x="70" y="18" text-anchor="middle" fill="white" font-family="Arial, sans-serif" font-size="11" font-weight="bold">assignment</text>
      <text x="10" y="42" fill="#333" font-family="monospace" font-size="9">id (PK)</text>
      <text x="10" y="55" fill="#333" font-family="monospace" font-size="9">license_id, account_id</text>
    </g>

    <!-- Seat Table -->
    <g transform="translate(530, 240)">
      <rect width="150" height="90" rx="5" fill="white" stroke="#14b8a6" stroke-width="2"/>
      <rect width="150" height="25" rx="5" fill="#14b8a6"/>
      <text x="75" y="18" text-anchor="middle" fill="white" font-family="Arial, sans-serif" font-size="11" font-weight="bold">seat</text>
      <text x="10" y="42" fill="#333" font-family="monospace" font-size="9">id (PK)</text>
      <text x="10" y="55" fill="#333" font-family="monospace" font-size="9">assignment_id (FK)</text>
      <text x="10" y="68" fill="#333" font-family="monospace" font-size="9">node_id (FK)</text>
      <text x="10" y="81" fill="#333" font-family="monospace" font-size="9">lease_since, lease_until</text>
    </g>

    <!-- Node Table -->
    <g transform="translate(530, 350)">
      <rect width="150" height="70" rx="5" fill="white" stroke="#a855f7" stroke-width="2"/>
      <rect width="150" height="25" rx="5" fill="#a855f7"/>
      <text x="75" y="18" text-anchor="middle" fill="white" font-family="Arial, sans-serif" font-size="11" font-weight="bold">node</text>
      <text x="10" y="42" fill="#333" font-family="monospace" font-size="9">id (PK)</text>
      <text x="10" y="55" fill="#333" font-family="monospace" font-size="9">license_id (FK)</text>
    </g>

    <!-- Invitation Table -->
    <g transform="translate(200, 260)">
      <rect width="140" height="80" rx="5" fill="white" stroke="#ec4899" stroke-width="2"/>
      <rect width="140" height="25" rx="5" fill="#ec4899"/>
      <text x="70" y="18" text-anchor="middle" fill="white" font-family="Arial, sans-serif" font-size="11" font-weight="bold">invitation</text>
      <text x="10" y="42" fill="#333" font-family="monospace" font-size="9">id, code</text>
      <text x="10" y="55" fill="#333" font-family="monospace" font-size="9">account_id (FK org)</text>
      <text x="10" y="68" fill="#333" font-family="monospace" font-size="9">data, isNewUser</text>
    </g>

    <!-- Relationship Lines -->
    <!-- identity -> account -->
    <line x1="170" y1="100" x2="200" y2="100" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>

    <!-- account -> account_member -->
    <line x1="270" y1="140" x2="270" y2="160" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>

    <!-- license -> product -->
    <line x1="530" y1="90" x2="550" y2="90" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>

    <!-- license -> scheme -->
    <line x1="530" y1="130" x2="550" y2="170" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>

    <!-- license -> assignment -->
    <line x1="450" y1="200" x2="450" y2="220" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>

    <!-- assignment -> seat -->
    <line x1="510" y1="255" x2="530" y2="280" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>

    <!-- seat -> node -->
    <line x1="605" y1="330" x2="605" y2="350" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>

    <!-- account_group -> group_member -->
    <line x1="95" y1="270" x2="95" y2="290" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>

    <!-- Legend -->
    <g transform="translate(20, 390)">
      <text x="0" y="15" fill="#666" font-family="Arial, sans-serif" font-size="10" font-weight="bold">FK = Foreign Key</text>
      <text x="0" y="30" fill="#666" font-family="Arial, sans-serif" font-size="10" font-weight="bold">PK = Primary Key</text>
      <text x="120" y="15" fill="#666" font-family="Arial, sans-serif" font-size="10">Arrows show relationships</text>
    </g>
  </g>

  <!-- ==================== BACKEND SECTION ==================== -->
  <g transform="translate(50, 300)">
    <rect width="280" height="260" rx="10" fill="#ede9fe" stroke="#8b5cf6" stroke-width="2" filter="url(#shadow)"/>
    <rect width="280" height="35" rx="10" fill="#8b5cf6"/>
    <text x="140" y="24" text-anchor="middle" fill="white" font-family="Arial, sans-serif" font-size="14" font-weight="bold">BACKEND (Lumen PHP)</text>

    <!-- Controllers -->
    <g transform="translate(15, 45)">
      <text x="0" y="15" fill="#5b21b6" font-family="Arial, sans-serif" font-size="12" font-weight="bold">Controllers:</text>

      <rect x="0" y="22" width="120" height="24" rx="3" fill="white" stroke="#8b5cf6"/>
      <text x="60" y="38" text-anchor="middle" fill="#333" font-family="monospace" font-size="10">AuthController</text>

      <rect x="130" y="22" width="120" height="24" rx="3" fill="white" stroke="#8b5cf6"/>
      <text x="190" y="38" text-anchor="middle" fill="#333" font-family="monospace" font-size="10">UserController</text>

      <rect x="0" y="52" width="120" height="24" rx="3" fill="white" stroke="#8b5cf6"/>
      <text x="60" y="68" text-anchor="middle" fill="#333" font-family="monospace" font-size="10">AccountController</text>

      <rect x="130" y="52" width="120" height="24" rx="3" fill="white" stroke="#8b5cf6"/>
      <text x="190" y="68" text-anchor="middle" fill="#333" font-family="monospace" font-size="10">LicenseController</text>

      <rect x="0" y="82" width="120" height="24" rx="3" fill="white" stroke="#8b5cf6"/>
      <text x="60" y="98" text-anchor="middle" fill="#333" font-family="monospace" font-size="10">ProductController</text>
    </g>

    <!-- Role Checks -->
    <g transform="translate(15, 160)">
      <text x="0" y="15" fill="#5b21b6" font-family="Arial, sans-serif" font-size="12" font-weight="bold">Role Access Control:</text>
      <text x="0" y="35" fill="#333" font-family="monospace" font-size="10">role &lt; 1 = blocked (user only)</text>
      <text x="0" y="50" fill="#333" font-family="monospace" font-size="10">role == 1 = admin access</text>
      <text x="0" y="65" fill="#ec4899" font-family="monospace" font-size="10" font-weight="bold">role == 2 = superadmin (ALL)</text>
    </g>

    <!-- API -->
    <g transform="translate(15, 215)">
      <text x="0" y="15" fill="#5b21b6" font-family="Arial, sans-serif" font-size="12" font-weight="bold">API Endpoint:</text>
      <text x="0" y="32" fill="#333" font-family="monospace" font-size="10">http://localhost:8000/api/</text>
    </g>
  </g>

  <!-- ==================== FRONTEND SECTION ==================== -->
  <g transform="translate(1080, 80)">
    <rect width="280" height="280" rx="10" fill="#dbeafe" stroke="#3b82f6" stroke-width="2" filter="url(#shadow)"/>
    <rect width="280" height="35" rx="10" fill="#3b82f6"/>
    <text x="140" y="24" text-anchor="middle" fill="white" font-family="Arial, sans-serif" font-size="14" font-weight="bold">FRONTEND (Vue.js)</text>

    <!-- Vuex Stores -->
    <g transform="translate(15, 45)">
      <text x="0" y="15" fill="#1e40af" font-family="Arial, sans-serif" font-size="12" font-weight="bold">Vuex Store Modules:</text>

      <rect x="0" y="22" width="120" height="24" rx="3" fill="white" stroke="#3b82f6"/>
      <text x="60" y="38" text-anchor="middle" fill="#333" font-family="monospace" font-size="10">account.module</text>

      <rect x="130" y="22" width="120" height="24" rx="3" fill="white" stroke="#3b82f6"/>
      <text x="190" y="38" text-anchor="middle" fill="#333" font-family="monospace" font-size="10">users.module</text>

      <rect x="0" y="52" width="120" height="24" rx="3" fill="white" stroke="#3b82f6"/>
      <text x="60" y="68" text-anchor="middle" fill="#333" font-family="monospace" font-size="10">licenses.module</text>

      <rect x="130" y="52" width="120" height="24" rx="3" fill="white" stroke="#3b82f6"/>
      <text x="190" y="68" text-anchor="middle" fill="#333" font-family="monospace" font-size="10">products.module</text>

      <rect x="0" y="82" width="120" height="24" rx="3" fill="white" stroke="#3b82f6"/>
      <text x="60" y="98" text-anchor="middle" fill="#333" font-family="monospace" font-size="10">groups.module</text>

      <rect x="130" y="82" width="120" height="24" rx="3" fill="white" stroke="#3b82f6"/>
      <text x="190" y="98" text-anchor="middle" fill="#333" font-family="monospace" font-size="10">alert.module</text>
    </g>

    <!-- Services -->
    <g transform="translate(15, 140)">
      <text x="0" y="15" fill="#1e40af" font-family="Arial, sans-serif" font-size="12" font-weight="bold">Services (API calls):</text>
      <text x="0" y="35" fill="#333" font-family="monospace" font-size="10">userService.js</text>
      <text x="0" y="50" fill="#333" font-family="monospace" font-size="10">licenseService.js</text>
      <text x="0" y="65" fill="#333" font-family="monospace" font-size="10">accountService.js</text>
    </g>

    <!-- Auth -->
    <g transform="translate(15, 210)">
      <text x="0" y="15" fill="#1e40af" font-family="Arial, sans-serif" font-size="12" font-weight="bold">Authentication:</text>
      <text x="0" y="32" fill="#333" font-family="monospace" font-size="10">JWT Token in localStorage</text>
      <text x="0" y="47" fill="#333" font-family="monospace" font-size="10">http://localhost:8080/</text>
    </g>
  </g>

  <!-- ==================== DATA FLOW SECTION ==================== -->
  <g transform="translate(1080, 380)">
    <rect width="280" height="180" rx="10" fill="#fef9c3" stroke="#eab308" stroke-width="2" filter="url(#shadow)"/>
    <rect width="280" height="35" rx="10" fill="#eab308"/>
    <text x="140" y="24" text-anchor="middle" fill="white" font-family="Arial, sans-serif" font-size="14" font-weight="bold">DATA FLOW</text>

    <g transform="translate(15, 45)">
      <text x="0" y="15" fill="#713f12" font-family="Arial, sans-serif" font-size="11">1. User logs in via JWT</text>
      <text x="0" y="35" fill="#713f12" font-family="Arial, sans-serif" font-size="11">2. Token stored in localStorage</text>
      <text x="0" y="55" fill="#713f12" font-family="Arial, sans-serif" font-size="11">3. API calls with Bearer token</text>
      <text x="0" y="75" fill="#713f12" font-family="Arial, sans-serif" font-size="11">4. Backend checks role access</text>
      <text x="0" y="95" fill="#713f12" font-family="Arial, sans-serif" font-size="11">5. Data returned based on role:</text>
      <text x="15" y="110" fill="#3b82f6" font-family="Arial, sans-serif" font-size="10">- User: own data only</text>
      <text x="15" y="123" fill="#22c55e" font-family="Arial, sans-serif" font-size="10">- Admin: organization data</text>
      <text x="15" y="136" fill="#ec4899" font-family="Arial, sans-serif" font-size="10">- SuperAdmin: ALL data</text>
    </g>
  </g>

  <!-- ==================== LICENSE TYPES ==================== -->
  <g transform="translate(50, 580)">
    <rect width="280" height="150" rx="10" fill="#fce7f3" stroke="#ec4899" stroke-width="2" filter="url(#shadow)"/>
    <rect width="280" height="35" rx="10" fill="#ec4899"/>
    <text x="140" y="24" text-anchor="middle" fill="white" font-family="Arial, sans-serif" font-size="14" font-weight="bold">LICENSE TYPES &amp; STATUS</text>

    <g transform="translate(15, 45)">
      <text x="0" y="15" fill="#9d174d" font-family="Arial, sans-serif" font-size="11" font-weight="bold">Types:</text>
      <text x="0" y="32" fill="#333" font-family="monospace" font-size="10">0 = Named User</text>
      <text x="0" y="47" fill="#333" font-family="monospace" font-size="10">1 = Floating</text>

      <text x="140" y="15" fill="#9d174d" font-family="Arial, sans-serif" font-size="11" font-weight="bold">Status:</text>
      <text x="140" y="32" fill="#22c55e" font-family="monospace" font-size="10">0 = Available</text>
      <text x="140" y="47" fill="#f59e0b" font-family="monospace" font-size="10">1 = Verification</text>
      <text x="140" y="62" fill="#3b82f6" font-family="monospace" font-size="10">2 = Active</text>
      <text x="140" y="77" fill="#ef4444" font-family="monospace" font-size="10">3 = Expired</text>
    </g>
  </g>

  <!-- ==================== ORGANIZATION HIERARCHY ==================== -->
  <g transform="translate(360, 580)">
    <rect width="400" height="180" rx="10" fill="#ecfdf5" stroke="#10b981" stroke-width="2" filter="url(#shadow)"/>
    <rect width="400" height="35" rx="10" fill="#10b981"/>
    <text x="200" y="24" text-anchor="middle" fill="white" font-family="Arial, sans-serif" font-size="14" font-weight="bold">ORGANIZATION HIERARCHY</text>

    <!-- Visual hierarchy -->
    <g transform="translate(20, 50)">
      <!-- Organization -->
      <rect x="120" y="0" width="120" height="30" rx="5" fill="#f59e0b" stroke="#d97706"/>
      <text x="180" y="20" text-anchor="middle" fill="white" font-family="Arial, sans-serif" font-size="11" font-weight="bold">Organization</text>
      <text x="180" y="45" text-anchor="middle" fill="#666" font-family="Arial, sans-serif" font-size="9">(account table)</text>

      <!-- Lines down -->
      <line x1="140" y1="55" x2="80" y2="80" stroke="#666" stroke-width="1"/>
      <line x1="180" y1="55" x2="180" y2="80" stroke="#666" stroke-width="1"/>
      <line x1="220" y1="55" x2="280" y2="80" stroke="#666" stroke-width="1"/>

      <!-- Groups -->
      <rect x="20" y="80" width="100" height="25" rx="5" fill="#06b6d4" stroke="#0891b2"/>
      <text x="70" y="97" text-anchor="middle" fill="white" font-family="Arial, sans-serif" font-size="10">Group A</text>

      <rect x="130" y="80" width="100" height="25" rx="5" fill="#06b6d4" stroke="#0891b2"/>
      <text x="180" y="97" text-anchor="middle" fill="white" font-family="Arial, sans-serif" font-size="10">Group B</text>

      <rect x="240" y="80" width="100" height="25" rx="5" fill="#ef4444" stroke="#dc2626"/>
      <text x="290" y="97" text-anchor="middle" fill="white" font-family="Arial, sans-serif" font-size="10">Licenses</text>

      <!-- Users -->
      <circle cx="40" cy="125" r="10" fill="#3b82f6"/>
      <circle cx="70" cy="125" r="10" fill="#3b82f6"/>
      <circle cx="100" cy="125" r="10" fill="#22c55e"/>

      <circle cx="150" cy="125" r="10" fill="#3b82f6"/>
      <circle cx="180" cy="125" r="10" fill="#ec4899"/>
      <circle cx="210" cy="125" r="10" fill="#3b82f6"/>
    </g>

    <!-- Legend -->
    <g transform="translate(280, 90)">
      <circle cx="10" cy="10" r="6" fill="#3b82f6"/>
      <text x="22" y="14" fill="#333" font-family="Arial, sans-serif" font-size="9">User (role=0)</text>

      <circle cx="10" cy="28" r="6" fill="#22c55e"/>
      <text x="22" y="32" fill="#333" font-family="Arial, sans-serif" font-size="9">Admin (role=1)</text>

      <circle cx="10" cy="46" r="6" fill="#ec4899"/>
      <text x="22" y="50" fill="#333" font-family="Arial, sans-serif" font-size="9">SuperAdmin (2)</text>
    </g>
  </g>

  <!-- ==================== KEY RELATIONSHIPS ==================== -->
  <g transform="translate(780, 580)">
    <rect width="280" height="180" rx="10" fill="#f0f9ff" stroke="#0ea5e9" stroke-width="2" filter="url(#shadow)"/>
    <rect width="280" height="35" rx="10" fill="#0ea5e9"/>
    <text x="140" y="24" text-anchor="middle" fill="white" font-family="Arial, sans-serif" font-size="14" font-weight="bold">KEY RELATIONSHIPS</text>

    <g transform="translate(15, 45)">
      <text x="0" y="15" fill="#0369a1" font-family="Arial, sans-serif" font-size="10" font-weight="bold">identity.account_id</text>
      <text x="5" y="28" fill="#666" font-family="Arial, sans-serif" font-size="9">-> account.id (user's account)</text>

      <text x="0" y="48" fill="#0369a1" font-family="Arial, sans-serif" font-size="10" font-weight="bold">account_member</text>
      <text x="5" y="61" fill="#666" font-family="Arial, sans-serif" font-size="9">-> links user to organization</text>

      <text x="0" y="81" fill="#0369a1" font-family="Arial, sans-serif" font-size="10" font-weight="bold">license.owner_id</text>
      <text x="5" y="94" fill="#666" font-family="Arial, sans-serif" font-size="9">-> account.id (org owns license)</text>

      <text x="0" y="114" fill="#0369a1" font-family="Arial, sans-serif" font-size="10" font-weight="bold">assignment</text>
      <text x="5" y="127" fill="#666" font-family="Arial, sans-serif" font-size="9">-> license + account (user assigned)</text>
    </g>
  </g>

  <!-- Connection arrows between major sections -->
  <!-- Backend to Database -->
  <path d="M 330 430 L 360 350" stroke="#8b5cf6" stroke-width="2" fill="none" marker-end="url(#arrowhead)" stroke-dasharray="5,3"/>

  <!-- Frontend to Backend -->
  <path d="M 1080 200 L 400 200 L 350 300" stroke="#3b82f6" stroke-width="2" fill="none" marker-end="url(#arrowhead-blue)" stroke-dasharray="5,3"/>

  <!-- Footer -->
  <text x="700" y="790" text-anchor="middle" fill="#94a3b8" font-family="Arial, sans-serif" font-size="11">License Management System - Architecture Diagram | Generated 2025</text>

</svg>